<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Force Graph</title>
  <!-- Import D3 from the server -->
  <script src="/d3/dist/d3.min.js"></script>
</head>
<body>
  <script type="module">
    import { ForceGraph } from './forceGraph.js';

    // function to get data from the server
    async function fetchData() {
      const response = await fetch('/data'); // Fetch data from the server route
      if (!response.ok) {
        console.error('Error fetching data');
        return;
      }
      const data = await response.json(); // Parse the data as JSON
      console.log('Fetched data:', data); // Log the data to the console
      return data;  // Return the fetched data
    }
    const data = await fetchData()

    const colorMap = {
      0: "#1f77b4", // Blue
      1: "#ff7f0e", // Orange
      2: "#2ca02c", // Green
      3: "#d62728", // Red
      4: "#9467bd", // Purple
      5: "#8c564b", // Brown
      6: "#e377c2", // Pink
      7: "#7f7f7f", // Gray
      8: "#bcbd22", // Yellow-Green
      9: "#17becf", // Cyan
      10: "#aec7e8" // Light Blue
      };
    data.colorMap = colorMap;
    console.log(data);

    // feed the data to the ForceGraph function
    const graph = ForceGraph(data);
    // try {
    //   ForceGraph(data);
    // } catch (error) {
    //   console.error("Error in ForceGraph:", error);
    // }

    // add to the html
    document.body.appendChild(graph);
  </script>
</body>
</html>
